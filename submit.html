<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§›ì§‘ë””ë¹„ë“±ë¡í•˜ê¸°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>
    <style>
        #container {
            max-width:600px;
            margin-left:auto;
            margin-right:auto;
        }
    </style>
</head>
<body>
    <div id="container">
        <h1>ì‹ë‹¹ë“±ë¡í•˜ê¸°ğŸ¤£</h1>
        <b>ë””ë¹„ë¥¼ ì±„ì›Œì£¼ì„¸ìš”!</b>
        <form id="forsubmit">
            <div class="form-floating mb-3">
                <input name="name" type="text" class="form-control" id="mealname" placeholder="ë§›ìˆëŠ”ì œìœ¡ì‹ë‹¹">
                <label for="mealname">ë§›ì§‘ ì´ë¦„ì„ ì•Œë ¤ì£¼ì„¸ìš”!ğŸ˜‹</label>
            </div>
            <div class="form-floating mb-3">
                <input onclick="openAddress()" name="locations" type="text" class="form-control" id="address" placeholder="ì„œìš¸ ì„œì´ˆêµ¬ ì‚¬ì„ë‹¹ë¡œ 111-4">
                <label for="address">ì£¼ì†Œë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”! ì˜ˆì‹œ)ì„œì´ˆêµ¬</label>
            </div>
            <div class="form-floating mb-3">
                <input name="feel" type="text" class="form-control" id="feel" placeholder="ë„“ì€">
                <label for="feel">ë¶„ìœ„ê¸°ëŠ” ì–´ë• ì„ê¹Œìš”? ğŸ˜Œ(ë„“ì€,ë¶„ìœ„ê¸°ì¢‹ì€,ì¸í…Œë¦¬ì–´) ë˜ëŠ” ì›í•˜ëŠ” í‚¤ì›Œë“œ ì…ë ¥</label>
            </div>
            <div class="form-floating mb-3">
                <input name="price" type="text" class="form-control" id="price" placeholder="ë„“ì€">
                <label for="price">ê°€ê²©ì„ ë³´í†µ, ë¹„ì‹¼, ì‹¼ ì¤‘ í•˜ë‚˜ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”~ğŸ˜†</label>
            </div>
            <div class="form-floating mb-3">
                <input name="rating" type="text" class="form-control" id="rating" placeholder="4.5">
                <label for="rating">í‰ì ì€?ğŸ¥º 3.0ë¶€í„° 5.0ê¹Œì§€</label>
            </div>
            <div class="form-floating mb-3">
                <input name="review_content" type="text" class="form-control" id="review_content" placeholder="4.5">
                <label for="review_content">ë¦¬ë·°í•˜ê³  ì‹¶ì€ ë‚´ìš© (ë§›ì§‘ í´ë¦­ ì‹œ ë‚˜ì˜¤ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤.)ğŸ˜€</label>
            </div>
            <div class="form-floating mb-3">
                <input readonly name="lat" type="text" class="form-control" id="lat" placeholder="4.5">
                <label for="lat">ìœ„ë„( ì£¼ì†Œ ì…ë ¥ì‹œ ìë™ ì…ë ¥ë¨ )ğŸ˜‚</label>
            </div>
            <div class="form-floating mb-3">
                <input readonly name="lng" type="text" class="form-control" id="lng" placeholder="4.5">
                <label for="lng">ê²½ë„( ì£¼ì†Œ ì…ë ¥ì‹œ ìë™ ì…ë ¥ë¨ )ğŸ˜‚</label>
            </div> 
        </form>
        <div id="map" style=" width:100%;height:400px;">

        </div>
        
        <p>ê´€ë¦¬ì ìŠ¹ì¸í›„ì— ë“±ë¡ë©ë‹ˆë‹¤ğŸ‘</p>
        <button type="button" class="btn btn-outline-primary">ë“±ë¡í•˜ê¸°</button>

    </div>
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=57a63270870e59dc71bf6117850386e9&libraries=services,clusterer&autoload=true"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>
    <script>
        let mapOptions = {
            center:[37.5, 127.6],
            zoom:10,
            
        }
 
        let map = new L.map('map' , mapOptions, );
        let layer = new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
        let markerLists = []
        map.addLayer(layer);
        function addMarkers(x, y, data) {
            // let marker = new L.Marker([x, y], {icon: greenIcon});
            let marker = new L.Marker([x, y] );
            marker.addTo(map).bindPopup(data).openPopup();
            markerLists.push(marker)
        }
        function removeMarkers() {
            for(var i = 0; i < markerLists.length; i++)  {
                map.removeLayer(markerLists[i]);
            }
        }
 
        function openAddress() {
            new daum.Postcode({
                oncomplete: function(data) {
                    console.log(data)
                    // íŒì—…ì—ì„œ ê²€ìƒ‰ê²°ê³¼ í•­ëª©ì„ í´ë¦­í–ˆì„ë•Œ ì‹¤í–‰í•  ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
                    // ì˜ˆì œë¥¼ ì°¸ê³ í•˜ì—¬ ë‹¤ì–‘í•œ í™œìš©ë²•ì„ í™•ì¸í•´ ë³´ì„¸ìš”.
                    address.value = data.sigungu
                    var geocoder = new kakao.maps.services.Geocoder(); 
                    var callback = function(result, status) {
                        if (status === kakao.maps.services.Status.OK) {
                            lat.value = result[0].y
                            lng.value = result[0].x 
                            addMarkers(result[0].y, result[0].x, "ì—¬ê¸°ë¥¼ ë“±ë¡í• ê»˜ìš”ğŸ˜Œ")
                            var targetZoomLevel = 17; // ì›í•˜ëŠ” ì¤Œ ë ˆë²¨ì„ ì„¤ì •í•©ë‹ˆë‹¤. 
                            map.setView([result[0].y, result[0].x], targetZoomLevel);
                        }
                        
                    }; 
                    geocoder.addressSearch(data.address, callback);
                    
                }
            }).open();
        }
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body> 
</html>